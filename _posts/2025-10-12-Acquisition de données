---
layout: post
title: "Acquisition de données"
---

# Tutoriel : Téléchargement des données *Play-by-Play* de la LNH

[`https://api-web.nhle.com/v1/gamecenter/{game_id}/play-by-play`](https://api-web.nhle.com/v1/gamecenter/{game_id}/play-by-play)

---

## ⚙️ Fonction principale : téléchargement par saisons

La fonction suivante gère le téléchargement de plusieurs saisons et types de matchs (saison régulière et séries éliminatoires) à l’aide du point d’accès de l’API.

```python
def fetch_year_range_fast(start_year: int, end_year: int, types=("regular", "playoffs")):
    """
    Télécharge les données play-by-play de la LNH pour plusieurs saisons et types de matchs.

    Args:
        start_year (int): Première saison à inclure (ex: 2016).
        end_year (int): Dernière saison à inclure (incluse).
        types (tuple[str]): Types de matchs à télécharger, par défaut ("regular", "playoffs").

    Returns:
        dict[tuple[int, str], int]: Nombre de matchs téléchargés ou trouvés en cache
        pour chaque combinaison (année, type).
    """
    results = {}
    for year in range(start_year, end_year + 1):
        for gtype in types:
            print(f"\n=== {year} {gtype} ===")
            try:
                ok = fetch_season_fast(year, gtype)
                results[(year, gtype)] = ok
            except Exception as e:
                print(f"[ERR] {year} {gtype}: {e}")
    return results
